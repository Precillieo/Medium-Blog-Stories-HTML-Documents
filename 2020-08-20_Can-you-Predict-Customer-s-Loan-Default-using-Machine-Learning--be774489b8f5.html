<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Can you Predict Customer’s Loan Default using Machine Learning?</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Can you Predict Customer’s Loan Default using Machine Learning?</h1>
</header>
<section data-field="subtitle" class="p-summary">
Machine Learning algorithms in predicting which customers will default on their loans based on their financial information and historical…
</section>
<section data-field="body" class="e-content">
<section name="78a5" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="61d5" id="61d5" class="graf graf--h3 graf--leading graf--title">Can you Predict Customer’s Loan Default using Machine Learning?</h3><h4 name="ca79" id="ca79" class="graf graf--h4 graf-after--h3 graf--subtitle">Machine Learning algorithms in predicting which customers will default on their loans based on their financial information and historical data</h4><figure name="15a8" id="15a8" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*UC0sy0bENl-DLPy3jmXNag.jpeg" data-width="640" data-height="480" src="https://cdn-images-1.medium.com/max/800/1*UC0sy0bENl-DLPy3jmXNag.jpeg"><figcaption class="imageCaption">Image from Medical Tourism Corporation</figcaption></figure><p name="5f8c" id="5f8c" class="graf graf--p graf-after--figure">Loan lending has been an important part of daily lives for organizations and individuals alike. With the ever-increasing competition in the financial world and due to a significant amount of financial constraints, the activity of taking a loan has become more or less inevitable. Individuals around the world depend on the activity of loan lending for reasons such as overcoming their financial constraints in order for them to achieve some personal goals. Similarly, banks, small to large firms depend on the activity of loan lending for the basic purpose of managing their affairs and to function smoothly in times where there are financial constraints.</p><p name="5934" id="5934" class="graf graf--p graf-after--p">Although it is quite profitable and beneficial for both the lenders and the borrowers. However, it carries a great risk, which in the domain of loan lending is referred to as Loan risk. Industry experts and researchers around the world assign individuals with numerical scores known as credit scores to measure the risk and their creditworthiness.</p><p name="c560" id="c560" class="graf graf--p graf-after--p">Throughout the years, machine learning algorithms have been used to calculate and predict credit risk by evaluating an individual’s historical data. This study reviews the present literature on models predicting risk assessment that use Machine Learning algorithms.</p><p name="aa42" id="aa42" class="graf graf--p graf-after--p">Literally, this can be locally controlled by following these measures;</p><ul class="postList"><li name="29e6" id="29e6" class="graf graf--li graf-after--p">Credit analysis of potential borrowers should be carried out in order to judge the credit risk associated with the borrower and to reach a lending decision.</li></ul><figure name="197e" id="197e" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*dZW9kJ33XGFf-FN1aviueQ.jpeg" data-width="675" data-height="450" src="https://cdn-images-1.medium.com/max/800/1*dZW9kJ33XGFf-FN1aviueQ.jpeg"><figcaption class="imageCaption">Image from Ringgitplus</figcaption></figure><ul class="postList"><li name="ee61" id="ee61" class="graf graf--li graf-after--figure">Loan repayments should be monitored and whenever a customer defaults, action should be taken. Thus banks should avoid loans to risky customers, monitor loan repayments, and renegotiate loans when customers get into difficulties.</li><li name="1de7" id="1de7" class="graf graf--li graf-after--li">Bad loans can be restricted by ensuring that loans are made to only borrowers who are likely to be able to repay, and who is unlikely to become insolvent.</li></ul><p name="072a" id="072a" class="graf graf--p graf-after--li">For this assignment, the bank wants to predict which customers will default on their loans based on their financial information.</p><h4 name="5df5" id="5df5" class="graf graf--h4 graf-after--p">Here’s how I did it</h4><p name="0592" id="0592" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Data Source</strong>: From the data provided(Loan Default Prediction on Zindi), there are 3 different datasets of each of the train and test data;</p><blockquote name="c562" id="c562" class="graf graf--pullquote graf-after--p">The demographic data,</blockquote><blockquote name="ad3a" id="ad3a" class="graf graf--pullquote graf-after--pullquote">The performance data</blockquote><blockquote name="9896" id="9896" class="graf graf--pullquote graf-after--pullquote">The previous loan data.</blockquote><p name="a772" id="a772" class="graf graf--p graf-after--pullquote">Under this, there are customer’s information such as the bank_account_type, level_of_education_clients, employment_status_clients, birthdate, loanamount, total_due, creationdate, approveddate, termdays, totaldue, firstduedate, loannumber, longitude_gps, latitude_gps, good_bad_flag and so on.</p><p name="c87e" id="c87e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Data Cleaning</strong>: We had to merge the important features from the three datasets. Cleaning was done by filling in the missing values using the attributes of Central Tendencies, imported <strong class="markup--strong markup--p-strong">DateTime</strong> in order to work on the date-related variables, the <strong class="markup--strong markup--p-strong">timestamp</strong> from DateTime to convert the date features to time in seconds, converted the categorical columns to numerical columns, transforming the data into a form the Machine Learning algorithm can process.</p><p name="7cc8" id="7cc8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Did You Know That?</strong></p><p name="7500" id="7500" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Just a few percentage of customers are defaulting(Good_bad_flag).</strong></p><p name="96ea" id="96ea" class="graf graf--p graf-after--p">(good = settled loan on time; bad = did not settled loan on time) - this is the target variable that we need to predict.</p><figure name="920a" id="920a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*QFooUS8CsYDwR2lvZ2IbMA.jpeg" data-width="683" data-height="399" src="https://cdn-images-1.medium.com/max/800/1*QFooUS8CsYDwR2lvZ2IbMA.jpeg"><figcaption class="imageCaption">Good bad flag visualization</figcaption></figure><p name="2e90" id="2e90" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Insights/Exploratory Data Analysis(EDA)</strong></p><ul class="postList"><li name="90cf" id="90cf" class="graf graf--li graf-after--p">78.3% of the customers didn’t default while 21.7% of the customers defaulted.</li></ul><p name="78e0" id="78e0" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Most of the defaulters possess Savings account(Bank_account_type).</strong></p><figure name="a7ec" id="a7ec" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ObtPfGEa2DQGUS33krYT-Q.jpeg" data-width="683" data-height="302" src="https://cdn-images-1.medium.com/max/800/1*ObtPfGEa2DQGUS33krYT-Q.jpeg"></figure><figure name="f335" id="f335" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*R6-WYbAxdp_J12c2Fy4RsA.jpeg" data-width="683" data-height="425" src="https://cdn-images-1.medium.com/max/800/1*R6-WYbAxdp_J12c2Fy4RsA.jpeg"><figcaption class="imageCaption">Bank account type visualization</figcaption></figure><p name="aea3" id="aea3" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Insights/EDA</strong></p><ul class="postList"><li name="c21f" id="c21f" class="graf graf--li graf-after--p">A higher number of defaulters have a savings account. Current account holders hardly default.</li><li name="f2f7" id="f2f7" class="graf graf--li graf-after--li">78% of the savings account holders who applied for loans didn’t default while 21% defaulted.</li><li name="6e4a" id="6e4a" class="graf graf--li graf-after--li">85.7% of the current account holders who applied for loans didn’t default while 14% defaulted.</li></ul><p name="9cf0" id="9cf0" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Most of the defaulters are graduates(Level_of_education_clients).</strong></p><figure name="8d85" id="8d85" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*9KK62Ne74yIFiGWVfAuGoQ.jpeg" data-width="683" data-height="290" src="https://cdn-images-1.medium.com/max/800/1*9KK62Ne74yIFiGWVfAuGoQ.jpeg"></figure><figure name="7a0d" id="7a0d" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*hYQ0kojplJN2FbVmZDk13w.jpeg" data-width="683" data-height="349" src="https://cdn-images-1.medium.com/max/800/1*hYQ0kojplJN2FbVmZDk13w.jpeg"><figcaption class="imageCaption">Level of education clients visualization</figcaption></figure><p name="e9d4" id="e9d4" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Insights/EDA</strong></p><ul class="postList"><li name="352d" id="352d" class="graf graf--li graf-after--p">80% of the graduates who applied for loans didn’t default while 20% defaulted.</li><li name="89d6" id="89d6" class="graf graf--li graf-after--li">85% of the secondary students didn’t default while 15% defaulted.</li><li name="3e52" id="3e52" class="graf graf--li graf-after--li">86% of the Post-Graduate repaid the loans while 13% defaulted.</li><li name="e4e9" id="e4e9" class="graf graf--li graf-after--li">All primary students who applied for loans didn’t default.</li></ul><p name="3202" id="3202" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Unemployed people default the most(employment_status_clients).</strong></p><figure name="34ae" id="34ae" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*pKyylh4r64tcdkT1TJMihw.jpeg" data-width="683" data-height="313" src="https://cdn-images-1.medium.com/max/800/1*pKyylh4r64tcdkT1TJMihw.jpeg"></figure><figure name="03f8" id="03f8" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*jP2tascsnhiHqnZfae7a_g.jpeg" data-width="683" data-height="421" src="https://cdn-images-1.medium.com/max/800/1*jP2tascsnhiHqnZfae7a_g.jpeg"><figcaption class="imageCaption">Employment status client visualization</figcaption></figure><p name="1b80" id="1b80" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Insights/EDA</strong></p><ul class="postList"><li name="6677" id="6677" class="graf graf--li graf-after--p">78% of the permanent workers who applied for loans didn’t default while 21% defaulted.</li><li name="b40c" id="b40c" class="graf graf--li graf-after--li">80% of the students who applied for loans didn’t default while 19% defaulted.</li><li name="f96f" id="f96f" class="graf graf--li graf-after--li">73% of the unemployed people who applied for loans didn’t default while 26% defaulted.</li><li name="0555" id="0555" class="graf graf--li graf-after--li">78% of the self-employed people who applied for loans didn’t default while 20% defaulted.</li><li name="c3c1" id="c3c1" class="graf graf--li graf-after--li">All contracts and retired customers successfully paid their loans.</li></ul><h4 name="773d" id="773d" class="graf graf--h4 graf-after--li">Cool, Now what?</h4><p name="edae" id="edae" class="graf graf--p graf--startsWithDoubleQuote graf-after--h4"><strong class="markup--strong markup--p-strong">“How much do these variables matter if you want to predict customers who may likely default?”</strong></p><p name="3507" id="3507" class="graf graf--p graf-after--p">This is where we get our hands on Machine Learning, we would train the model to predict a new customer who may default if issued a loan based on the historical data.</p><p name="15f0" id="15f0" class="graf graf--p graf-after--p">We used <strong class="markup--strong markup--p-strong">RandomForestClassifier(RF)</strong>, <strong class="markup--strong markup--p-strong">AdaBoostClassifier(Ab)</strong>, <strong class="markup--strong markup--p-strong">GradientBoostingClassifier(GBR)</strong> in determining how accurate our model is. However, RF is seen to have an accuracy of 0.795, Ab has 0.802 as well as GBR. Looks like the accuracy of Ab and GBR beat the other machine learning algorithm.</p><figure name="f774" id="f774" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*2Xu-3vQ6LtK7S051tOY_-g.jpeg" data-width="683" data-height="386" src="https://cdn-images-1.medium.com/max/800/1*2Xu-3vQ6LtK7S051tOY_-g.jpeg"><figcaption class="imageCaption">Models accuracy</figcaption></figure><p name="980f" id="980f" class="graf graf--p graf-after--figure">Random forest is among the most popular machine learning methods thanks to its relatively good accuracy, robustness, and ease of use. It also provides two straightforward methods for feature selection: mean decrease impurity and mean decrease accuracy. Let’s check what variables Rf considers most important in predicting loan default.</p><figure name="f031" id="f031" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*n_h-qTLXKpovUE-SMNRbVA.jpeg" data-width="683" data-height="365" src="https://cdn-images-1.medium.com/max/800/1*n_h-qTLXKpovUE-SMNRbVA.jpeg"><figcaption class="imageCaption">Rf feature importance</figcaption></figure><p name="96b9" id="96b9" class="graf graf--p graf-after--figure">We see, pretty straightforward and boring. There are quite a lot of variables above the 0.06 (60%) relative importance; customer’s birth date, longitude and latitude GPS, date the loan was approved, created, repaid, due date, closed, and many more.</p><p name="2fa1" id="2fa1" class="graf graf--p graf-after--p">What do the longitude and latitude tell us about loan default since they have quite a high importance?</p><p name="ca4d" id="ca4d" class="graf graf--p graf-after--p">Latitude and Longitude are the units that represent the coordinates at a geographic coordinate system where you just have to make a search, use the name of place, city, state, address in detecting or tracking the location of each customers.</p><figure name="31c1" id="31c1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ET5WEHvnUfWwjTexg9uaDw.jpeg" data-width="683" data-height="337" src="https://cdn-images-1.medium.com/max/800/1*ET5WEHvnUfWwjTexg9uaDw.jpeg"><figcaption class="imageCaption">Rf Confusion Matrix</figcaption></figure><p name="aa5d" id="aa5d" class="graf graf--p graf-after--figure">From the Random Forest Confusion matrix, 1.5% (13/870) clients did not pay the loan back but were predicted to not default i.e <strong class="markup--strong markup--p-strong">false</strong> <strong class="markup--strong markup--p-strong">positive</strong>.</p><figure name="d309" id="d309" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*MDF56AiwUANmdgxGRj1NTw.jpeg" data-width="683" data-height="358" src="https://cdn-images-1.medium.com/max/800/1*MDF56AiwUANmdgxGRj1NTw.jpeg"><figcaption class="imageCaption">Ab Confusion Matrix</figcaption></figure><p name="706b" id="706b" class="graf graf--p graf-after--figure">Yikes, with AdaBoost, we made the number of false-positive come down from 13 to 0, which looks like a thriving prediction.</p><figure name="904f" id="904f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*rZVvNv_ybV-bslSlxery9A.jpeg" data-width="577" data-height="221" src="https://cdn-images-1.medium.com/max/800/1*rZVvNv_ybV-bslSlxery9A.jpeg"></figure><p name="ed20" id="ed20" class="graf graf--p graf-after--figure">After making a submission on <a href="https://zindi.africa/competitions/data-science-nigeria-challenge-1-loan-default-prediction/leaderboard?page=2" data-href="https://zindi.africa/competitions/data-science-nigeria-challenge-1-loan-default-prediction/leaderboard?page=2" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Zindi</a>, the score(0.2220) ranged from 85 to 151 on the leaderboard out of the 195 submissions made.</p><p name="8625" id="8625" class="graf graf--p graf-after--p">This is quite a good prediction!</p><h4 name="e4f1" id="e4f1" class="graf graf--h4 graf-after--p">Things to note</h4><ul class="postList"><li name="7936" id="7936" class="graf graf--li graf-after--h4">There are some discrepancies in the data. Data discrepancy is very common and misunderstanding will lead to a wrong conclusion. This means that I am intrinsically bound by the methods, estimates, and errors. For example, the data says all primary students who applied for loans didn’t default. I’d rather die than believe that’s true.</li><li name="cc9d" id="cc9d" class="graf graf--li graf-after--li">There is no one way to determine if a client will stop making repayments, even if there are ways, it would be pretty hard in predicting accurately. Nevertheless, there are factors that may contribute to customer’s potential in making a repayment.</li></ul><p name="da42" id="da42" class="graf graf--p graf-after--li">Click <a href="https://github.com/Precillieo/SCA-mp-C2-Assignments/blob/master/Last%20Project/Loan%20CrPd.ipynb" data-href="https://github.com/Precillieo/SCA-mp-C2-Assignments/blob/master/Last%20Project/Loan%20CrPd.ipynb" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">here</strong></a> to view all the codes on Github.</p><h4 name="41ac" id="41ac" class="graf graf--h4 graf-after--p">GRATITUDE</h4><p name="d3b0" id="d3b0" class="graf graf--p graf-after--h4 graf--trailing">This depicts my final project as a mentee of She Code Africa in the Data Science Track. Many thanks to my mentor <a href="https://medium.com/u/985e503f2ec5" data-href="https://medium.com/u/985e503f2ec5" data-anchor-type="2" data-user-id="985e503f2ec5" data-action-value="985e503f2ec5" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Aminu Israel</a> for the unrelenting effort and encouragement in making this a success.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@precillieo" class="p-author h-card">Kolawole Precious</a> on <a href="https://medium.com/p/be774489b8f5"><time class="dt-published" datetime="2020-08-20T05:40:33.495Z">August 20, 2020</time></a>.</p><p><a href="https://medium.com/@precillieo/can-you-predict-customers-loan-default-using-machine-learning-be774489b8f5" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 24, 2020.</p></footer></article></body></html>